function formatDateOnly (dateObject) {	var currDate = dateObject.getDate();	var currMonth = dateObject.getMonth();	currMonth++; // convert month 0-11 in 1-12 	var currYear = dateObject.getFullYear();	return currYear + '-' + (currMonth < 10 ? '0' : '') + currMonth + '-' + (currDate < 10 ? '0' : '') + currDate;};function timeFloat2Str (timeFloat) {			var timeStr = "";	var integerPart = Math.floor(timeFloat);	var decimalPart = ((timeFloat % 1).toFixed(2)) * 1;						timeStr = integerPart + 'h';		if (decimalPart !== 0) {		decimalPart = Math.round(decimalPart * 60); //convertion de centièmes d'heures en minutes		timeStr += decimalPart; 	}	return timeStr;};debugger;var html = '';var dtCollection = ds.Detail_Temps.query("DET_Date >= 2012-10-01 AND DET_Date <= 2012-10-07 order by DET_Date, DPI_ID");var currentDayOfWeek = -1;var previousDayOfWeek = -1;var dayArr = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];var cumulDayTime = 0;var cumulTotalTime = 0;html += '<div class="t1">';html += '<div class="t2">';//ligne d'entete avec titre des colonneshtml += '<div class="r1">'; // for each array elementhtml += '<span class="s1"><b>Jour</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>Client</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>Dossier</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>N°</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>Temps</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>Poste</b></span>';  //nouvelle colonnehtml += '<span class="s1"><b>Observations</b></span>';  //nouvelle colonnehtml += '</div>';dtCollection.forEach(function(dt) {try{	currentDayOfWeek = dt.DET_Date.getDay();	cumulDayTime += dt.DET_Temps;	     html += '<div class="r1">'; // for each array element    html += '<span class="s1">' + dayArr[currentDayOfWeek] + '&nbsp'+ formatDateOnly(dt.DET_Date) + '</span>'; // Jour    html += '<span class="s1">' + dt.Lien_DPI_DT.Lien_DOSPOS_DPI.Lien_DOS_DOSPOS.Lien_SOC_DOSPOS.SOC_RS_Courte + '</span>'; //Client    html += '<span class="s1">' + dt.Lien_DPI_DT.Lien_DOSPOS_DPI.Lien_DOS_DOSPOS.DOS_Libelle + '</span>'; //Dossier    html += '<span class="s1">' + dt.Lien_DPI_DT.Lien_DOSPOS_DPI.Lien_DOS_DOSPOS.DOS_Numero + '</span>'; //N°    html += '<span class="s1">' + dt.DET_heures + '</span>'; //Temps    html += '<span class="s1">' + dt.Lien_DPI_DT.Lien_DOSPOS_DPI.Lien_POS_DOSPOS.POS_Code + '</span>'; //Poste    html += '<span class="s1">' + dt.DET_Commentaire + '</span>'; //Observation    html += '</div>';	if (previousDayOfWeek == -1) { //premier tour de boucle		previousDayOfWeek = currentDayOfWeek;		} else if (currentDayOfWeek !== previousDayOfWeek) { //changement de jour		debugger;        html += '<div class="r1">'; // ligne cumul jour        html += '<span class="s1">Cumul journalier</span>'; //Temps        html += '<span class="s1">' + timeFloat2Str(cumulDayTime) + '</span>'; //Temps        html += '</div>';        html += '<div class="r1">'; // ligne cumul jour		html += '<span class="s1"><hr noshade align="center"</span>'; // ligne séparation jour        html += '</div>';    	previousDayOfWeek = currentDayOfWeek;		cumulTotalTime += cumulDayTime;		cumulDayTime = 0;		    } else {    		}}	catch (err)	{		//	}});debugger;html += '<div class="r1">'; // ligne cumul jourhtml += '<span class="s1">Cumul journalier</span>'; //Tempshtml += '<span class="s1">' + timeFloat2Str(cumulDayTime) + '</span>'; //Tempshtml += '</div>';html += '<div class="r1">'; // ligne cumul jourhtml += '<span class="s1"><hr noshade align="center"</span>'; // ligne séparation jourhtml += '</div>';cumulTotalTime += cumulDayTime;html += '<div class="r1">'; // ligne cumul totalhtml += '<span class="s1">Total heures : ' + timeFloat2Str(cumulTotalTime) + '</span>'; //Tempshtml += '</div>';html +='</div>';html +='</div>';html;